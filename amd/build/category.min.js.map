{"version":3,"file":"category.min.js","sources":["../src/category.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Snipet category manager.\n *\n * @module     mod_snippet/category\n * @class      Category\n * @copyright 2023 Nicolas Dalpe <ndalpe@gmail.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport ModalForm from 'core_form/modalform';\nimport Notification from 'core/notification';\nimport { prefetchStrings } from 'core/prefetch';\nimport { get_string as getString } from 'core/str';\nimport * as snippetSelectors from 'mod_snippet/selectors';\n\n/**\n * Modal form to create new category.\n *\n * @param {integer} cmid The module context id.\n */\nexport const init = (cmid) => {\n\n    prefetchStrings('mod_snippet', [\n        'newcategory_modal_title',\n        'create_new_category',\n        'notification_newcategory_created'\n    ]);\n\n    const newCategoryButton = document.querySelector(snippetSelectors.actions.createNewCategory);\n    newCategoryButton.addEventListener('click', event => {\n        event.preventDefault();\n\n        const modalForm = new ModalForm({\n            modalConfig: {\n                title: getString('newcategory_modal_title', 'mod_snippet'),\n                large: true\n            },\n            args: { cmid: cmid },\n            saveButtonText: getString('create_new_category', 'mod_snippet'),\n            formClass: 'mod_snippet\\\\form\\\\create_category'\n        });\n\n        // Called when the form is submitted.\n        modalForm.addEventListener(modalForm.events.FORM_SUBMITTED, event => {\n            if (event.detail.result) {\n                Notification.addNotification({\n                    type: 'success',\n                    message: getString('notification_newcategory_created', 'mod_snippet')\n                });\n            } else {\n                Notification.addNotification({\n                    type: 'error',\n                    message: event.detail.errors.join('<br>')\n                });\n            }\n        });\n\n        modalForm.show();\n    });\n};\n"],"names":["cmid","document","querySelector","snippetSelectors","actions","createNewCategory","addEventListener","event","preventDefault","modalForm","ModalForm","modalConfig","title","large","args","saveButtonText","formClass","events","FORM_SUBMITTED","detail","result","addNotification","type","message","errors","join","show"],"mappings":";;;;;;;;k3BAmCqBA,qCAED,cAAe,CAC3B,0BACA,sBACA,qCAGsBC,SAASC,cAAcC,iBAAiBC,QAAQC,mBACxDC,iBAAiB,SAASC,QACxCA,MAAMC,uBAEAC,UAAY,IAAIC,mBAAU,CAC5BC,YAAa,CACTC,OAAO,mBAAU,0BAA2B,eAC5CC,OAAO,GAEXC,KAAM,CAAEd,KAAMA,MACde,gBAAgB,mBAAU,sBAAuB,eACjDC,UAAW,uCAIfP,UAAUH,iBAAiBG,UAAUQ,OAAOC,gBAAgBX,QACpDA,MAAMY,OAAOC,6BACAC,gBAAgB,CACzBC,KAAM,UACNC,SAAS,mBAAU,mCAAoC,uCAG9CF,gBAAgB,CACzBC,KAAM,QACNC,QAAShB,MAAMY,OAAOK,OAAOC,KAAK,aAK9ChB,UAAUiB"}